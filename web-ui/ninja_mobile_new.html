<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>NET Ninja Dashboard</title>
    <style>
        body { margin: 0; font-family: sans-serif; background: #0a0a0a; color: #fff; }
        video.hero { width: 100%; height: 200px; object-fit: cover; }
        nav { display: flex; overflow-x: auto; border-bottom: 1px solid #333; }
        nav button {
            flex: 1 0 auto;
            padding: 1em;
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
        }
        nav button.active {
            border-bottom: 2px solid #3f51b5;
            font-weight: 600;
        }
        #content { padding: 1em; min-height: 320px; }
        .loading { color: #9aa0ff; }
        .error {
            background: #4a1b1b;
            border: 1px solid #a44;
            border-radius: 6px;
            padding: 0.75em;
            margin-bottom: 1em;
        }
        iframe { width: 100%; height: 520px; border: none; }
    </style>
    <script>
        const tabs = ["dashboard", "openclaw", "cameras"];

        function setActiveTab(name) {
            document.querySelectorAll('nav button').forEach(btn => {
                const isActive = btn.dataset.tab === name;
                btn.classList.toggle('active', isActive);
                btn.setAttribute('aria-current', isActive ? 'page' : 'false');
            });
        }

        function showError(err) {
            const status = document.getElementById("status");
            const message = err?.message || String(err || "Unknown error");
            status.textContent = `Failed to load tab: ${message}`;
            status.classList.add("error");
        }

        function loadTab(name) {
            const content = document.getElementById("content");
            const status = document.getElementById("status");
            status.textContent = "";
            status.classList.remove("error");
            content.setAttribute("aria-busy", "true");
            content.innerHTML = '<p class="loading" role="status">Loadingâ€¦</p>';
            setActiveTab(name);

            fetch(`/assets/${name}.html`)
                .then(r => {
                    if (!r.ok) {
                        throw new Error(`HTTP ${r.status}`);
                    }
                    return r.text();
                })
                .then(html => {
                    content.innerHTML = html;
                    content.removeAttribute("aria-busy");
                })
                .catch(err => {
                    content.removeAttribute("aria-busy");
                    showError(err);
                });
        }

        function navigateTo(name) {
            const target = tabs.includes(name) ? name : "dashboard";
            window.location.hash = target;
        }

        function loadFromHash() {
            const hash = window.location.hash.replace("#", "").trim();
            const target = tabs.includes(hash) ? hash : "dashboard";
            loadTab(target);
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('nav button').forEach(button => {
                button.addEventListener('click', () => navigateTo(button.dataset.tab));
            });
            loadFromHash();
        });

        window.addEventListener('hashchange', loadFromHash);
    </script>
</head>
<body>
    <video class="hero" autoplay muted loop src="ninja_claw.mp4"></video>
    <nav role="tablist" aria-label="NET Ninja sections">
        <button type="button" data-tab="dashboard" aria-controls="content">Dashboard</button>
        <button type="button" data-tab="openclaw" aria-controls="content">OpenClaw</button>
        <button type="button" data-tab="cameras" aria-controls="content">Cameras</button>
    </nav>
    <div id="status" aria-live="polite"></div>
    <main id="content" role="region" aria-live="polite"></main>
</body>
</html>
