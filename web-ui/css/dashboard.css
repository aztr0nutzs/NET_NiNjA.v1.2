    :root{
      --bg0:#000;
      --panel: rgba(10, 11, 16, 0.72);
      --panel2: rgba(0,0,0,0.55);

      --neon-cyan:#00f0ff;
      --neon-purple:#b967ff;
      --neon-pink:#ff4fd8;
      --ok: var(--neon-cyan);
      --warn: var(--neon-purple);
      --bad: var(--neon-purple);

      --border-cyan: rgba(0, 240, 255, 0.42);
      --border-purple: rgba(185, 103, 255, 0.42);
      --border-pink: rgba(255, 79, 216, 0.52);

      --shadow-cyan: none;
      --shadow-purple: none;
      --shadow-mix: none;

      --radius: 16px;
      --radius-sm: 12px;

      --gap: 12px;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);

      --tabbar-h: 74px;
      --topbar-h: 96px;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html, body{ height:100%; width:100%; }
    body{
      background: var(--bg0);
      color: rgba(255,255,255,0.92);
      font-family: "Share Tech Mono", monospace;
      overflow-x:hidden;
      min-height: 100dvh;
    }

    /* Keep the full page background pure black (no glow overlays). */
    body::before{
      content:none;
    }
    body::after{
      content:none;
    }

    .app{
      min-height:100dvh;
      display:flex;
      flex-direction:column;
      padding-top: calc(var(--safe-top));
      padding-bottom: calc(var(--tabbar-h) + var(--safe-bottom));
    }

    /* Top chrome */
    .topbar{
      position:sticky;
      top:0;
      z-index:1000;
      height: calc(var(--topbar-h) + var(--safe-top));
      padding: 0 12px;
      background: #020205;
      border-bottom: 1px solid var(--border-purple);
      box-shadow: none;
      overflow:hidden;
    }
    .topbar-inner{
      position:relative;
      height:100%;
      display:flex;
      align-items:center;
      gap:10px;
      padding-top: var(--safe-top);
    }
    .header-media{
      position:absolute;
      inset:0;
      overflow:hidden;
    }
    .header-media video,
    .header-media img{
      width:100%;
      height:100%;
      object-fit:contain;
      object-position:center;
      display:block;
      background: #020205;
    }
    .header-overlay{
      position:absolute;
      inset:0;
      background: linear-gradient(90deg, rgba(2,2,5,0.65), rgba(2,2,5,0.25) 45%, rgba(2,2,5,0.65));
    }
    .brand,
    .topbar-actions{
      position:relative;
      z-index:1;
    }
    .topbar-actions{
      margin-left:auto;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 0;
      flex:1;
    }
    .brand-badge{
      width:38px; height:38px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
      box-shadow: none;
      display:grid; place-items:center;
      color:#000; font-weight:900;
      font-family:"Orbitron", sans-serif;
      letter-spacing:0.5px;
    }
    .brand-title{
      font-family:"Orbitron", sans-serif;
      font-weight:700;
      letter-spacing:1.5px;
      font-size: 14px;
      line-height:1.1;
      color: rgba(255,255,255,0.95);
      white-space:nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .brand-sub{
      font-size: 11px;
      color: rgba(255,255,255,0.65);
      margin-top: 2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .btn{
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.25);
      color: rgba(255,255,255,0.9);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font: inherit;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      display:inline-flex; align-items:center; gap:8px;
      user-select:none;
    }
    .btn:active{ transform: scale(0.97); }

    .btn-primary{
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
      color:#000;
      border-color: rgba(0,0,0,0.1);
      box-shadow: none;
      font-weight:800;
      letter-spacing:0.8px;
      text-transform: uppercase;
      white-space: nowrap;
    }
    .btn-primary .kbd{
      font-size: 11px;
      background: rgba(0,0,0,0.15);
      padding: 2px 6px;
      border-radius: 10px;
      letter-spacing: 0;
    }

    .icon-btn{
      width:40px; height:40px;
      padding:0;
      justify-content:center;
      border-radius: 12px;
      border-color: rgba(185,103,255,0.22);
      box-shadow: none;
    }
    .icon{
      width:18px; height:18px;
      display:block;
      fill:none;
      stroke: rgba(255,255,255,0.92);
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    /* Content */
    main{
      padding: 12px;
      padding-top: 14px;
      flex: 1 1 auto;
      min-height: 0;
      display:flex;
      flex-direction:column;
    }

    .tab-page{
      display:none;
      animation: fadeIn .14s ease;
      min-height: calc(100dvh - var(--topbar-h) - var(--tabbar-h) - var(--safe-top) - var(--safe-bottom) - 26px);
      flex: 1 1 auto;
    }
    .tab-page.active{ display:block; }
    .tab-page.media{
      padding: 0;
      flex-direction:column;
      height: calc(100dvh - var(--topbar-h) - var(--tabbar-h) - var(--safe-top) - var(--safe-bottom) - 26px);
      min-height: 0;
    }
    .tab-page.media.active{ display:flex; }
    .tab-page.media iframe{
      flex:1 1 auto;
      width:100%;
      height:100%;
      border:none;
      display:block;
    }

    .app.media-tab-active main{
      padding: 0;
      padding-top: 0;
    }

    #tab-devices.map-mode{
      padding: 0;
      display:flex;
      flex-direction:column;
      height: calc(100dvh - var(--topbar-h) - var(--tabbar-h) - var(--safe-top) - var(--safe-bottom));
      min-height: 0;
      position: relative;
    }
    #tab-devices.map-mode.active{ display:flex; }
    #tab-devices.map-mode .nn-deviceMapHost{ display:flex; flex:1 1 auto; min-height:0; }
    #tab-devices.map-mode .nn-deviceListWrap{ display:none; }

    #tab-devices .nn-deviceMapHost{ display:none; position:relative; }
    .nn-deviceMapToolbar{
      position:absolute;
      top:10px;
      right:10px;
      z-index:9;
      display:flex;
      gap:8px;
      background:rgba(0,0,0,0.55);
      border:1px solid rgba(255,255,255,0.14);
      border-radius:10px;
      padding:6px;
      backdrop-filter: blur(8px);
    }
    .nn-deviceMapToolbar .btn{ padding:7px 10px; min-height:34px; }
    .nn-deviceMapHost iframe{ width:100%; height:100%; border:none; background:#000; }
    @keyframes fadeIn{ from{ opacity:.35; transform: translateY(4px);} to{ opacity:1; transform:none; } }

    h2{
      font-family:"Orbitron", sans-serif;
      font-weight:700;
      letter-spacing:1.6px;
      text-transform: uppercase;
      font-size: 14px;
      color: rgba(255,255,255,0.92);
      margin: 6px 0 10px 2px;
      text-shadow: none;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
    }
    @media (min-width: 560px){
      .grid-2{ grid-template-columns: 1fr 1fr; }
    }

    .card{
      background: var(--panel);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border-purple);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: none;
      position: relative;
      overflow:hidden;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .card:active{ transform: translateY(-2px); box-shadow: none; border-color: rgba(0,240,255,0.35); }
    .card::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(135deg, transparent 35%, rgba(0,240,255,0.08) 55%, transparent 75%);
      opacity:.35;
      pointer-events:none;
    }
    .card-head{
      position:relative;
      z-index:1;
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      margin-bottom:10px;
    }
    .card-title{
      font-family:"Orbitron", sans-serif;
      font-size: 12px;
      letter-spacing:1.2px;
      text-transform: uppercase;
      color: rgba(255,255,255,0.88);
    }
    .pill{
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: rgba(255,255,255,0.82);
      white-space: nowrap;
    }
    .pill.ok{ border-color: rgba(0, 240, 255,0.45); color: var(--ok); box-shadow: none; }
    .pill.bad{ border-color: rgba(229,98,192,0.45); color: var(--bad); box-shadow: none; }
    .pill.warn{ border-color: rgba(185,103,255,0.45); color: var(--warn); box-shadow: none; }

    .big{
      position:relative;
      z-index:1;
      font-size: 34px;
      font-weight: 900;
      letter-spacing: 1px;
      color: var(--neon-cyan);
      text-shadow: none;
      margin: 6px 0 10px 0;
    }
    .muted{
      position:relative;
      z-index:1;
      font-size: 12px;
      color: rgba(255,255,255,0.65);
      line-height: 1.35;
    }

    .card-actions{
      position:relative;
      z-index:1;
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }
    .btn-ghost{
      background: rgba(0,0,0,0.22);
      border-color: rgba(0,240,255,0.18);
      box-shadow: none;
      color: rgba(255,255,255,0.92);
      text-transform: uppercase;
      font-weight: 800;
      font-size: 12px;
      padding: 10px 12px;
      letter-spacing: 0.8px;
    }
    .btn-ghost.purple{
      border-color: rgba(185,103,255,0.20);
      box-shadow: none;
    }
    .btn-danger{
      background: rgba(229,98,192,0.14);
      border-color: rgba(229,98,192,0.35);
      box-shadow: none;
      color: rgba(255,255,255,0.92);
      text-transform: uppercase;
      font-weight: 900;
      font-size: 12px;
      padding: 10px 12px;
      letter-spacing: 0.8px;
    }

    /* Devices top controls */
    .toolbar{
      display:flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 12px;
    }
    .row{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
    }
    .search{
      flex: 1;
      min-width: 200px;
      display:flex; align-items:center; gap:8px;
      background: var(--panel2);
      border: 1px solid rgba(185,103,255,0.24);
      box-shadow: none;
      padding: 10px 12px;
      border-radius: 14px;
    }
    .search input{
      width:100%;
      background: transparent;
      border: none;
      outline:none;
      color: rgba(255,255,255,0.92);
      font: inherit;
      font-size: 13px;
    }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      border: 1px solid rgba(185,103,255,0.26);
      background: rgba(0,0,0,0.22);
      color: rgba(255,255,255,0.86);
      padding: 8px 10px;
      border-radius: 999px;
      cursor:pointer;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      box-shadow: none;
      user-select:none;
    }
    .chip.active{
      background: linear-gradient(135deg, rgba(0,240,255,0.24), rgba(185,103,255,0.24));
      border-color: rgba(0,240,255,0.28);
      box-shadow: none;
    }

    /* Tables (scrollable on mobile) */
    .table-wrap{
      background: var(--panel);
      border: 1px solid var(--border-purple);
      border-radius: var(--radius);
      box-shadow: none;
      overflow:hidden;
    }
    .table-scroll{
      overflow:auto;
      max-height: 54vh;
      -webkit-overflow-scrolling: touch;
    }
    table{
      width:100%;
      border-collapse: collapse;
      min-width: 980px;
      font-size: 12px;
    }
    thead th{
      position: sticky;
      top:0;
      z-index: 1;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(8px);
      text-align:left;
      padding: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      color: rgba(255,255,255,0.72);
      text-transform: uppercase;
      letter-spacing: 0.7px;
      font-family:"Orbitron", sans-serif;
      font-weight: 600;
      white-space: nowrap;
    }
    tbody td{
      padding: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.86);
      white-space: nowrap;
    }
    tbody tr{
      cursor:pointer;
    }
    tbody tr:hover{
      background: rgba(185,103,255,0.08);
    }
    tbody tr.selected{
      background: rgba(0,240,255,0.10);
    }

    .status{
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      display:inline-flex;
      align-items:center;
      gap: 6px;
    }
    .dot{
      width: 6px; height: 6px; border-radius: 50%;
      background: rgba(255,255,255,0.35);
      box-shadow: none;
    }
    .status.online{ border-color: rgba(0, 240, 255,0.45); color: var(--ok); }
    .status.online .dot{ background: var(--ok); box-shadow: none; }
    .status.offline{ border-color: rgba(185,103,255,0.35); color: var(--neon-purple); }
    .status.offline .dot{ background: var(--neon-purple); box-shadow: none; }
    .status.blocked{ border-color: rgba(229,98,192,0.45); color: var(--bad); }
    .status.blocked .dot{ background: var(--bad); box-shadow: none; }

    .kebab{
      border:none;
      background: transparent;
      color: rgba(255,255,255,0.82);
      font: inherit;
      cursor:pointer;
      padding: 6px 8px;
      border-radius: 10px;
    }
    .kebab:hover{ background: rgba(255,255,255,0.06); }

    /* Right-side details panel on wider screens */
    .split{
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
    }
    @media (min-width: 980px){
      .split{ grid-template-columns: 1fr 380px; align-items:start; }
      .table-scroll{ max-height: calc(100dvh - var(--topbar-h) - var(--tabbar-h) - 170px); }
    }
    .sidepanel{
      display:none;
      background: var(--panel);
      border: 1px solid var(--border-purple);
      border-radius: var(--radius);
      box-shadow: none;
      padding: 14px;
      position: sticky;
      top: calc(var(--topbar-h) + var(--safe-top) + 12px);
      max-height: calc(100dvh - var(--topbar-h) - var(--safe-top) - var(--tabbar-h) - 26px);
      overflow:auto;
    }
    @media (min-width: 980px){
      .sidepanel{ display:block; }
    }
    .side-head{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      margin-bottom: 10px;
    }
    .side-title{
      font-family:"Orbitron", sans-serif;
      font-weight:700;
      letter-spacing:1px;
      font-size: 13px;
      text-transform: uppercase;
    }
    .side-sub{ font-size: 12px; color: rgba(255,255,255,0.65); margin-top: 4px; }
    .tabs2{
      display:flex; gap:8px; flex-wrap:wrap;
      margin: 10px 0 8px 0;
    }
    .tab2{
      font-size: 11px;
      letter-spacing:0.6px;
      text-transform: uppercase;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,240,255,0.14);
      background: rgba(0,0,0,0.25);
      cursor:pointer;
      color: rgba(255,255,255,0.85);
      user-select:none;
    }
    .tab2.active{
      border-color: rgba(0,240,255,0.25);
      background: rgba(0,240,255,0.12);
      box-shadow: none;
    }
    .kv{
      border-top: 1px solid rgba(255,255,255,0.08);
      margin-top: 10px;
      padding-top: 10px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 8px;
      font-size: 12px;
    }
    .kv .line{
      display:flex; justify-content:space-between; gap: 10px;
    }
    .kv .k{ color: rgba(255,255,255,0.65); }
    .kv .v{ color: rgba(255,255,255,0.92); text-align:right; }

    .notes{
      margin-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.08);
      padding-top: 12px;
    }
    .field{
      display:flex; flex-direction:column; gap:6px;
      margin-bottom: 10px;
    }
    .field label{
      font-size: 11px;
      color: rgba(255,255,255,0.65);
      text-transform: uppercase;
      letter-spacing:0.6px;
    }
    .field input, .field select, .field textarea{
      background: rgba(0,0,0,0.30);
      border: 1px solid rgba(185,103,255,0.22);
      border-radius: 12px;
      padding: 10px 12px;
      color: rgba(255,255,255,0.92);
      font: inherit;
      font-size: 13px;
      outline:none;
      box-shadow: none;
    }
    .field textarea{ min-height: 72px; resize: vertical; }

    /* Bottom nav (tabs) */
    .tabbar{
      position: fixed;
      left:0; right:0; bottom:0;
      z-index:1000;
      padding: 8px 10px calc(8px + var(--safe-bottom)) 10px;
      background: rgba(0,0,0,0.92);
      backdrop-filter: blur(18px);
      border-top: 1px solid var(--border-pink);
      box-shadow: none;
    }
    /*
     * Adjust the bottom navigation to support horizontal scrolling when many
     * tabs are present. Instead of wrapping to a new line or overflowing,
     * the tab bar will scroll horizontally on small screens. Scrollbars
     * are hidden for a clean appearance.
     */
    .tabbar-inner{
      display:flex;
      gap: 8px;
      align-items:stretch;
      justify-content:flex-start;
      flex-wrap: nowrap;
      overflow-x: auto;
      white-space: nowrap;
      -ms-overflow-style: none; /* IE and Edge */
      scrollbar-width: none; /* Firefox */
    }

    /* Hide the horizontal scrollbar on WebKit browsers */
    .tabbar-inner::-webkit-scrollbar{
      display: none;
    }
    /*
     * Let each tab button size to its content instead of stretching equally.
     * Combined with the scrollable bar above, this keeps all buttons visible
     * without overlapping or wrapping.
     */
    .tabbtn{
      flex:0 0 auto;
      min-width: 86px;
      border: 1px solid rgba(255,79,216,0.9);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.01)),
        rgba(0,0,0,0.70);
      border-radius: 14px;
      padding: 10px 10px;
      cursor:pointer;
      color: rgba(255,255,255,0.84);
      font: inherit;
      display:flex;
      flex-direction:column;
      gap: 6px;
      align-items:center;
      justify-content:center;
      user-select:none;
      transition: background .18s ease, border-color .18s ease, transform .08s ease, color .18s ease;
    }
    .tabbtn:hover{
      border-color: rgba(0,240,255,0.95);
      color: rgba(255,255,255,0.96);
      transform: translateY(-1px);
    }
    .tabbtn:active{ transform: scale(0.98); }
    .tabbtn.active{
      color: rgba(255,255,255,0.95);
      border-color: rgba(255,79,216,1);
      background:
        linear-gradient(180deg, rgba(255,79,216,0.18), rgba(0,240,255,0.12)),
        rgba(0,0,0,0.82);
      box-shadow: none;
    }
    .tabbtn .ticon{
      width: 22px;
      height: 22px;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 19px;
    }
    .tabbtn .tlabel{
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      font-family:"Orbitron", sans-serif;
      font-weight: 700;
    }

    
    /* SVG type icons in device table */
    .type-icon{
      display: inline-block;
      width: 16px;
      height: 16px;
      vertical-align: middle;
      margin-right: 4px;
      stroke: var(--accent, rgba(0,240,255,0.85));
      flex-shrink: 0;
    }

    /* Modals (history, notifications, device actions, dialogs) */
    .overlay{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,0.86);
      backdrop-filter: blur(10px);
      z-index:2000;
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 0 0 calc(var(--safe-bottom)) 0;
    }
    .overlay.show{ display:flex; }

    .sheet{
      width: 100%;
      max-width: 720px;
      border-top-left-radius: 22px;
      border-top-right-radius: 22px;
      background: linear-gradient(135deg, rgba(0,240,255,0.18), rgba(185,103,255,0.18));
      border: 1px solid rgba(185,103,255,0.35);
      border-bottom:none;
      box-shadow: none;
      padding: 14px 14px 12px 14px;
      animation: sheetUp .18s ease;
      max-height: 86vh;
      overflow:hidden;
    }
    @keyframes sheetUp{ from{ transform: translateY(18px); opacity: .7; } to{ transform:none; opacity:1; } }

    .sheet-head{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }
    .sheet-title{
      font-family:"Orbitron", sans-serif;
      font-weight:700;
      letter-spacing:1.5px;
      text-transform: uppercase;
      font-size: 13px;
    }
    .sheet-body{
      padding-top: 12px;
      overflow:auto;
      max-height: calc(86vh - 60px);
      -webkit-overflow-scrolling: touch;
    }

    .list{
      display:flex; flex-direction:column; gap:10px;
    }
    .list-item{
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding: 12px;
    }
    .list-item .line1{
      display:flex; justify-content:space-between; gap: 10px;
      font-size: 12px;
      color: rgba(255,255,255,0.9);
    }
    .list-item .line2{
      margin-top: 6px;
      font-size: 11px;
      color: rgba(255,255,255,0.65);
    }
    .list-item .action{
      margin-top: 10px;
      display:flex; justify-content:flex-end;
    }

    /* Tiny toast */
    .toast{
      position: fixed;
      left: 12px;
      right: 12px;
      bottom: calc(var(--tabbar-h) + var(--safe-bottom) + 10px);
      z-index: 3000;
      display:none;
      background: rgba(0,0,0,0.65);
      border: 1px solid rgba(185,103,255,0.28);
      border-radius: 14px;
      padding: 12px;
      box-shadow: none;
      backdrop-filter: blur(10px);
      max-width: 720px;
      margin: 0 auto;
    }
    .toast.show{ display:block; animation: toastIn .12s ease; }
    @keyframes toastIn{ from{ transform: translateY(8px); opacity:.65; } to{ transform:none; opacity:1; } }
    .toast .t1{ font-size: 12px; color: rgba(255,255,255,0.92); }
    .toast .t2{ margin-top: 4px; font-size: 11px; color: rgba(255,255,255,0.65); }
    .toast .tact{ margin-top: 10px; display:flex; justify-content:flex-end; gap: 10px; }

    .divider{ height:1px; background: rgba(255,255,255,0.08); margin: 10px 0; }

    /* Accessibility */
    .sr-only{
      position:absolute; width:1px; height:1px;
      padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
      white-space:nowrap; border:0;
    }
  
    /* ========= Integrated Scan Progress + Discovery Map ========= */

    /* Make the main scan button impossible to miss (humans are great at missing buttons). */
    #scanNowBtn,
    #btnScanMyNetwork,
    #btnNetworksScanMy{
      min-height: 46px;
      font-weight: 700;
      letter-spacing: 0.6px;
      box-shadow: none;
    }
    #scanNowBtn{ font-size: 0.95rem; }

    /* Replace "danger" red/pink with purple (requirement: cyan/purple/mint only) */
    .btn-danger{
      background: rgba(0,0,0,0.45) !important;
      border: 1px solid rgba(185,103,255,0.55) !important;
      color: var(--neon-purple) !important;
      box-shadow: none;
    }
    .btn-danger:hover{ filter: brightness(1.08); }

    /* Scan Progress widget */
    .nn-scanGrid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 14px;
      margin: 14px 0 0;
    }
    @media (max-width: 860px){
      .nn-scanGrid{ grid-template-columns: 1fr; }
    }

    .nn-prog{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 14px;
      margin-top: 10px;
    }
    .nn-prog .kvRow{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      padding: 6px 0;
      border-bottom: 1px dashed rgba(255,255,255,0.08);
    }
    .nn-prog .kvRow:last-child{ border-bottom:none; }
    .nn-prog .k{
      font-size: 0.74rem;
      color: rgba(255,255,255,0.68);
      letter-spacing: 0.8px;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .nn-prog .v{
      font-size: 0.92rem;
      color: rgba(255,255,255,0.92);
      text-shadow: none;
      white-space:nowrap;
    }
    @media (max-width: 520px){
      .nn-prog{ grid-template-columns: 1fr; }
    }

    .nn-bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(0,240,255,0.22);
      overflow:hidden;
      box-shadow: none;
      margin-top: 8px;
    }
    .nn-bar > i{
      display:block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(0,240,255,0.95), rgba(255, 79, 216,0.95), rgba(185,103,255,0.90));
      box-shadow: none;
      transition: width 160ms linear;
    }

    .nn-activity{
      display:flex;
      align-items:flex-end;
      gap: 6px;
      height: 52px;
      margin-top: 12px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(185,103,255,0.22);
      background: rgba(0,0,0,0.25);
      box-shadow: none;
      overflow:hidden;
    }
    .nn-activity span{
      flex:1;
      border-radius: 8px 8px 4px 4px;
      background: linear-gradient(180deg, rgba(0,240,255,0.7), rgba(255, 79, 216,0.55), rgba(185,103,255,0.45));
      box-shadow: none;
      transform-origin: bottom;
      animation: nnBar 1.35s infinite ease-in-out;
      opacity: 0.9;
    }
    .nn-activity span:nth-child(2){ animation-delay: -0.25s; }
    .nn-activity span:nth-child(3){ animation-delay: -0.55s; }
    .nn-activity span:nth-child(4){ animation-delay: -0.15s; }
    .nn-activity span:nth-child(5){ animation-delay: -0.85s; }
    .nn-activity span:nth-child(6){ animation-delay: -0.45s; }
    .nn-activity span:nth-child(7){ animation-delay: -0.70s; }
    @keyframes nnBar{
      0%,100%{ transform: scaleY(0.35); filter: saturate(1.1); }
      50%{ transform: scaleY(1.0); filter: saturate(1.55); }
    }

    /* Embedded Discovery Map (scoped so it doesn't hijack the whole app) */
    .nn-mapHost{
      position: relative;
      height: 420px;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(0,240,255,0.22);
      box-shadow: none;
      background: rgba(0,0,0,0.25);
      margin-top: 10px;
    }

    .nn-mapCard{
      width: 100%;
      height: 100%;
      border-radius: 16px;
      position: relative;
      background: linear-gradient(180deg, rgba(0,0,0,0.78), rgba(0,0,0,0.45));
      border: 1px solid rgba(255, 79, 216,0.28);
      box-shadow: none;
      overflow:hidden;
      touch-action:none;
    }
    .nn-mapCard::before, .nn-mapCard::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      border-radius:16px;
    }
    .nn-mapCard::before{
      background:
        linear-gradient(90deg, rgba(255, 79, 216,0.22), transparent 35%),
        linear-gradient(270deg, rgba(185,103,255,0.20), transparent 35%);
      opacity: 0.55;
      mix-blend-mode: screen;
    }
    .nn-mapCard::after{
      background: repeating-linear-gradient(0deg, rgba(255,255,255,0.05) 0 1px, transparent 1px 6px);
      opacity: 0.07;
    }

    .nn-hudTop{
      position:absolute;
      inset: 10px 10px auto 10px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      z-index:5;
      pointer-events:none;
    }
    .nn-title{
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      text-shadow: none;
    }
    .nn-sub{
      font-size: 10px;
      color: rgba(255,223,250,0.88);
      text-shadow: none;
    }
    .nn-viewport{
      position:absolute;
      inset: 42px 10px 10px 10px;
      border-radius: 14px;
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(255, 79, 216,0.22);
      box-shadow: none;
      overflow:hidden;
    }
    .nn-scene{
      width:100%;
      height:100%;
      perspective: 1200px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .nn-stage{
      width: min(940px, 140vw);
      height: min(580px, 70vh);
      position: relative;
      transform-style: preserve-3d;
      will-change: transform;
    }
    .nn-grid{
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(0deg, rgba(255, 79, 216,0.18) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(90deg, rgba(185,103,255,0.16) 0 1px, transparent 1px 30px);
      box-shadow: none;
      border: 1px solid rgba(185,103,255,0.22);
      filter: saturate(1.4) contrast(1.15);
    }
    .nn-neonFog{
      position:absolute;
      inset:-10%;
      background:
        radial-gradient(circle at 20% 25%, rgba(255, 79, 216,0.18), transparent 55%),
        radial-gradient(circle at 85% 35%, rgba(185,103,255,0.16), transparent 60%),
        radial-gradient(circle at 55% 85%, rgba(255, 79, 216,0.10), transparent 65%);
      mix-blend-mode: screen;
      filter: blur(18px) saturate(1.5);
      opacity: 0;
      pointer-events:none;
    }
    .nn-radar{
      position:absolute;
      width: 260px;
      height: 260px;
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      border-radius:50%;
      border: 1px solid rgba(185,103,255,0.75);
      box-shadow: none;
      animation: none;
      pointer-events:none;
    }
    @keyframes nnPulse{
      from { transform: translate(-50%,-50%) scale(0.25); opacity: 1; }
      to   { transform: translate(-50%,-50%) scale(2.6); opacity: 0; }
    }
    .nn-link{
      position:absolute;
      height: 2px;
      background: linear-gradient(90deg, rgba(0,240,255,0.92), rgba(255, 79, 216,0.88), rgba(185,103,255,0.92));
      box-shadow: none;
      transform-origin: left center;
      opacity: 0.95;
    }
    .nn-node{
      position:absolute;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.98), rgba(0,240,255,0.92) 42%, rgba(185,103,255,0.88) 78%);
      box-shadow: none;
      animation: nnFloat 3.0s infinite ease-in-out;
      filter: saturate(1.5) contrast(1.2);
    }
    .nn-node.threat{
      /* threat gets "hot" via purple intensity, not red/pink */
      background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.98), rgba(185,103,255,0.95) 55%, rgba(0,240,255,0.75) 90%);
      box-shadow: none;
    }
    @keyframes nnFloat{
      0%,100% { transform: translateZ(0px); }
      50%     { transform: translateZ(48px); }
    }
    .nn-label{
      position:absolute;
      top: -24px;
      left: -60px;
      width: 140px;
      font-size: 11px;
      color: rgba(255,223,250,0.98);
      text-shadow: none;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      pointer-events:none;
    }
    .nn-packet{
      position:absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 79, 216,1);
      box-shadow: none;
      pointer-events:none;
    }
    .nn-help{
      position:absolute;
      right:10px;
      bottom:10px;
      font-size: 10px;
      color: rgba(255,223,250,0.78);
      text-shadow: none;
      pointer-events:none;
    }
    .nn-permList{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 6px 12px;
      margin: 12px 0 0 0;
      font-size: 13px;
    }
    .nn-permList span:last-child{
      font-weight:600;
    }
    .nn-debugPanel{
      display:none;
      margin-top: 16px;
      padding: 12px;
      border: 1px dashed rgba(115,255,230,0.45);
      border-radius: 12px;
      background: rgba(5,14,24,0.7);
    }
    .nn-debugPanel.visible{
      display:block;
    }
    .nn-debugPanel pre{
      font-size: 11px;
      white-space: pre-wrap;
      margin: 0;
      color: rgba(255,223,250,0.92);
    }

  

/* Discovery Map iframe sizing */
.nn-mapHost iframe { background: #000; }
@media (max-width: 768px) {
  .nn-mapHost { height: 480px !important; }
}

/* ========= BUTTON FEEDBACK & LOADING STATES ========= */

/* Universal button click ripple animation */
.btn.nn-clicked {
  animation: nnBtnPulse 0.35s ease-out;
}
@keyframes nnBtnPulse {
  0%   { box-shadow: 0 0 0 0 rgba(0,240,255,0.45); }
  50%  { box-shadow: 0 0 12px 4px rgba(0,240,255,0.25); }
  100% { box-shadow: none; }
}
.btn-primary.nn-clicked {
  animation: nnBtnPulsePrimary 0.35s ease-out;
}
@keyframes nnBtnPulsePrimary {
  0%   { box-shadow: 0 0 0 0 rgba(185,103,255,0.55); }
  50%  { box-shadow: 0 0 16px 6px rgba(185,103,255,0.30); }
  100% { box-shadow: none; }
}
.btn-danger.nn-clicked {
  animation: nnBtnPulseDanger 0.35s ease-out;
}
@keyframes nnBtnPulseDanger {
  0%   { box-shadow: 0 0 0 0 rgba(185,103,255,0.55); }
  50%  { box-shadow: 0 0 14px 5px rgba(185,103,255,0.30); }
  100% { box-shadow: none; }
}

/* Loading spinner for buttons */
.btn.nn-loading {
  pointer-events: none;
  opacity: 0.80;
  position: relative;
}
.btn.nn-loading::after {
  content: "";
  display: inline-block;
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255,255,255,0.25);
  border-top-color: var(--neon-cyan);
  border-radius: 50%;
  animation: nnSpin 0.65s linear infinite;
  margin-left: 8px;
  vertical-align: middle;
  flex-shrink: 0;
}
.btn-primary.nn-loading::after {
  border-color: rgba(0,0,0,0.2);
  border-top-color: #000;
}
@keyframes nnSpin {
  to { transform: rotate(360deg); }
}

/* Scan running state - pulse the scan progress card */
#nnScanProgressCard.nn-scan-active {
  border-color: rgba(0,240,255,0.55);
  animation: nnScanCardPulse 2s ease-in-out infinite;
}
@keyframes nnScanCardPulse {
  0%, 100% { border-color: rgba(0,240,255,0.55); }
  50%      { border-color: rgba(185,103,255,0.55); }
}

/* Scan confirmation banner */
.nn-scan-banner {
  display: none;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 14px;
  margin: 0 0 14px 0;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  border: 1px solid rgba(0,240,255,0.35);
  background: linear-gradient(135deg, rgba(0,240,255,0.12), rgba(185,103,255,0.08));
  color: var(--neon-cyan);
}
.nn-scan-banner.active {
  display: flex;
  animation: fadeIn 0.14s ease;
}
.nn-scan-banner .nn-scan-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(0,240,255,0.25);
  border-top-color: var(--neon-cyan);
  border-radius: 50%;
  animation: nnSpin 0.65s linear infinite;
  flex-shrink: 0;
}
.nn-scan-banner.nn-scan-done {
  border-color: rgba(0,240,255,0.45);
  color: var(--neon-cyan);
}
.nn-scan-banner.nn-scan-done .nn-scan-spinner {
  animation: none;
  border-color: var(--neon-cyan);
  background: var(--neon-cyan);
}
.nn-scan-banner.nn-scan-error {
  border-color: rgba(185,103,255,0.45);
  color: var(--neon-purple);
}
.nn-scan-banner.nn-scan-error .nn-scan-spinner {
  animation: none;
  border-color: var(--neon-purple);
  background: var(--neon-purple);
}

/* ========= DEVICES SCREEN DIFFERENTIATION ========= */

/* Device summary stats bar */
.nn-device-summary {
  display: flex;
  gap: 10px;
  margin-bottom: 14px;
  padding: 12px 14px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(0,240,255,0.06), rgba(0,240,255,0.02));
  border: 1px solid rgba(0,240,255,0.22);
}
.nn-dev-stat {
  flex: 1;
  text-align: center;
  position: relative;
}
.nn-dev-stat + .nn-dev-stat::before {
  content: "";
  position: absolute;
  left: 0;
  top: 15%;
  height: 70%;
  width: 1px;
  background: rgba(0,240,255,0.18);
}
.nn-dev-stat-num {
  display: block;
  font-size: 26px;
  font-weight: 900;
  color: var(--neon-cyan);
  font-family: "Orbitron", sans-serif;
  line-height: 1.1;
}
.nn-dev-stat-num.nn-dev-unknown {
  color: var(--neon-purple);
}
.nn-dev-stat-num.nn-dev-blocked {
  color: var(--neon-pink);
}
.nn-dev-stat-label {
  display: block;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: rgba(255,255,255,0.55);
  margin-top: 3px;
}

/* Devices tab unique accent: cyan-dominant instead of purple */
.nn-devices-tab .table-wrap {
  border-color: rgba(0,240,255,0.22);
}
.nn-devices-tab .search {
  border-color: rgba(0,240,255,0.24);
}
.nn-devices-tab .chip.active {
  background: linear-gradient(135deg, rgba(0,240,255,0.22), rgba(0,240,255,0.08));
  border-color: rgba(0,240,255,0.35);
}
.nn-devices-tab .sidepanel {
  border-color: rgba(0,240,255,0.22);
}
.nn-devices-tab h2 {
  color: var(--neon-cyan);
  text-shadow: 0 0 12px rgba(0,240,255,0.25);
}

/* Device row hover: cyan glow (vs purple in networks) */
.nn-devices-tab tbody tr:hover {
  background: rgba(0,240,255,0.08);
}
.nn-devices-tab tbody tr.selected {
  background: rgba(0,240,255,0.14);
  border-left: 3px solid var(--neon-cyan);
}

/* Quick device icon badges in table cells */
.nn-devices-tab .status.online {
  background: rgba(0,240,255,0.08);
}
.nn-devices-tab .status.offline {
  background: rgba(185,103,255,0.06);
}
.nn-devices-tab .status.blocked {
  background: rgba(255,79,216,0.08);
}

/* ========= DISABLED / EMPTY STATE STYLING ========= */

.btn:disabled, .btn[disabled] {
  opacity: 0.45;
  cursor: not-allowed;
  pointer-events: none;
}

/* Input styling for gateway & tools */
.input {
  background: rgba(0,0,0,0.30);
  border: 1px solid rgba(185,103,255,0.22);
  border-radius: 12px;
  padding: 10px 12px;
  color: rgba(255,255,255,0.92);
  font: inherit;
  font-size: 13px;
  outline: none;
}
.input:focus {
  border-color: rgba(0,240,255,0.45);
}
