<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Psycho-Engine Speedtest (HOLO Merge)</title>

  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#0db9f2",
            "secondary": "#a855f7",
            "background-dark": "#050a0c",
            "panel": "#111c21",
            "ethereal-blue": "#00d4ff",
            "cyber-violet": "#9d50bb",
            "void-black": "#020408",
            "engine-iron": "#1a1c23",
          },
          fontFamily: {
            "display": ["Space Grotesk", "sans-serif"],
            "mono": ["JetBrains Mono", "monospace"],
          },
          borderRadius: {
            "DEFAULT": "0.125rem",
            "lg": "0.25rem",
            "xl": "0.5rem",
            "full": "0.75rem"
          },
        },
      },
    };
  </script>

  <style type="text/tailwindcss">
    @layer utilities {
      .vhs-overlay {
        background:
          linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.18) 50%),
          linear-gradient(90deg, rgba(255,0,0,0.055), rgba(0,255,0,0.02), rgba(0,0,255,0.055));
        background-size: 100% 4px, 3px 100%;
        pointer-events: none;
      }
      .chromatic-aberration {
        text-shadow: 1.5px 0 0 rgba(255,0,0,0.38), -1.5px 0 0 rgba(0,255,255,0.38);
      }
      .glitch-border {
        box-shadow:
          0 0 14px rgba(0,212,255,0.20),
          0 0 30px rgba(157,80,187,0.12),
          inset 0 0 14px rgba(0,212,255,0.10);
      }
      .glass-ring {
        border: 2px solid rgba(0, 212, 255, 0.14);
        box-shadow:
          inset 0 0 20px rgba(0, 212, 255, 0.09),
          0 0 18px rgba(157, 80, 187, 0.16);
      }
      .nitro-shard {
        clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
      }
      .engine-frame {
        background: linear-gradient(145deg, #1a1c23, #020408);
        border: 1px solid rgba(255,255,255,0.05);
        box-shadow: 10px 10px 22px #010204, -5px -5px 15px rgba(255,255,255,0.02);
      }
      .neural-node {
        background: radial-gradient(circle, rgba(0, 212, 255, 0.30) 0%, transparent 70%);
      }
      .perspective-center { perspective: 1200px; }
      .rotate-x-25 { transform: rotateX(25deg); }
      .data-heart-glow { filter: drop-shadow(0 0 15px rgba(0,212,255,0.55)); }
      .soft-frost {
        background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
        backdrop-filter: blur(18px);
      }
      .scanline-mask {
        background-image: repeating-linear-gradient(
          0deg,
          rgba(255,255,255,0.00),
          rgba(255,255,255,0.00) 2px,
          rgba(0,212,255,0.08) 2px,
          rgba(0,212,255,0.08) 3px
        );
        mix-blend-mode: overlay;
      }
      .tap-glow:active { filter: drop-shadow(0 0 12px rgba(0,212,255,0.45)); }
      .header-video-frame {
        background: linear-gradient(180deg, rgba(2,4,8,0.95), rgba(2,4,8,0.70), rgba(2,4,8,0.35), transparent);
        border-bottom: 1px solid rgba(255,255,255,0.06);
        box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      }
    }
  </style>

  <style>
    body { min-height: max(884px, 100dvh); }

    @keyframes holoPulse {
      0%, 100% { transform: scale(1); filter: blur(28px); opacity: .28; }
      50% { transform: scale(1.06); filter: blur(34px); opacity: .38; }
    }
    @keyframes drift {
      0% { transform: translate3d(0,0,0); opacity: .35; }
      50% { transform: translate3d(10px,-8px,0); opacity: .55; }
      100% { transform: translate3d(0,0,0); opacity: .35; }
    }
    @keyframes jitter {
      0% { transform: translate3d(0,0,0); }
      15% { transform: translate3d(0.8px,-0.4px,0); }
      30% { transform: translate3d(-0.6px,0.6px,0); }
      45% { transform: translate3d(0.7px,0.2px,0); }
      60% { transform: translate3d(-0.4px,-0.5px,0); }
      75% { transform: translate3d(0.5px,0.6px,0); }
      100% { transform: translate3d(0,0,0); }
    }

    /* Cyber button set (replaced with clipped cyber buttons) */

/* Cyberpunk clipped-glitch buttons (from attached style.css), adapted to this layout */
.cybr-btn {
  --primary: hsl(var(--primary-hue), 85%, calc(var(--primary-lightness, 50) * 1%));
  --shadow-primary: hsl(var(--shadow-primary-hue), 90%, 50%);
  --primary-hue: 180;
  --primary-lightness: 50;
  --color: hsl(0, 0%, 0%);
  --font-size: 14px;
  --shadow-primary-hue: 300;
  --shadow-secondary-hue: 60;
  --shadow-secondary: hsl(var(--shadow-secondary-hue), 90%, 60%);
  --clip: polygon(0 0, 100% 0, 100% 100%, 85% 100%, 8% 100%, 0 70%);
  --border: 4px;
  --shimmy-distance: 5;
  --clip-one: polygon(0 2%, 100% 2%, 100% 95%, 8% 95%, 0 70%);
  --clip-two: polygon(0 78%, 100% 78%, 100% 100%, 8% 100%, 0 78%);
  --clip-three: polygon(0 44%, 100% 44%, 100% 54%, 8% 54%, 0 54%);
  --clip-four: polygon(0 0, 100% 0, 100% 0, 8% 0, 0 0);
  --clip-five: polygon(0 0, 100% 0, 100% 0, 8% 0, 0 0);
  --clip-six: polygon(0 40%, 100% 40%, 100% 85%, 8% 85%, 0 70%);
  --clip-seven: polygon(0 63%, 100% 63%, 100% 80%, 8% 80%, 0 70%);

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 100%;
  height: 56px; /* keep existing size */
  padding: 0 16px;

  font-family: "Space Grotesk", sans-serif;
  font-style: italic; /* match the top header vibe */
  font-weight: 900;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  font-size: var(--font-size);

  border: 0;
  outline: transparent;
  cursor: pointer;

  color: var(--color);
  background: transparent;
  transition: filter 0.2s, transform 0.12s;
  clip-path: var(--clip);
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}

.cybr-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  filter: saturate(0.7);
}

.cybr-btn:active:not(:disabled) {
  transform: scale(0.985);
  filter: brightness(0.95);
}

.cybr-btn:before,
.cybr-btn:after {
  content: "";
  position: absolute;
  inset: 0;
  clip-path: var(--clip);
  z-index: -1;
}

.cybr-btn:before {
  background: var(--shadow-primary);
  transform: translate(var(--border), 0);
}

.cybr-btn:after {
  background: var(--primary);
}

.cybr-btn__glitch {
  position: absolute;
  top: calc(var(--border) * -1);
  left: calc(var(--border) * -1);
  right: calc(var(--border) * -1);
  bottom: calc(var(--border) * -1);
  background: var(--shadow-primary);
  text-shadow: 2px 2px var(--shadow-primary), -2px -2px var(--shadow-secondary);
  clip-path: var(--clip);
  animation: glitch 2s infinite;
  display: none;
  align-items: center;
  justify-content: center;
  font-family: "Space Grotesk", sans-serif;
  font-style: italic;
  font-weight: 900;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--color);
}

.cybr-btn:hover:not(:disabled) .cybr-btn__glitch {
  display: inline-flex;
}

.cybr-btn__glitch:before {
  content: "";
  position: absolute;
  inset: var(--border);
  clip-path: var(--clip);
  background: var(--primary);
  z-index: -1;
}

@keyframes glitch {
  0% { clip-path: var(--clip-one); }
  2%, 8% { clip-path: var(--clip-two); transform: translate(calc(var(--shimmy-distance) * -1%), 0); }
  6% { clip-path: var(--clip-two); transform: translate(calc(var(--shimmy-distance) * 1%), 0); }
  9% { clip-path: var(--clip-two); transform: translate(0, 0); }
  10% { clip-path: var(--clip-three); transform: translate(calc(var(--shimmy-distance) * 1%), 0); }
  13% { clip-path: var(--clip-three); transform: translate(0, 0); }
  14%, 21% { clip-path: var(--clip-four); transform: translate(calc(var(--shimmy-distance) * 1%), 0); }
  25% { clip-path: var(--clip-five); transform: translate(calc(var(--shimmy-distance) * 1%), 0); }
  30% { clip-path: var(--clip-five); transform: translate(calc(var(--shimmy-distance) * -1%), 0); }
  35%, 45% { clip-path: var(--clip-six); transform: translate(calc(var(--shimmy-distance) * -1%)); }
  40% { clip-path: var(--clip-six); transform: translate(calc(var(--shimmy-distance) * 1%)); }
  50% { clip-path: var(--clip-six); transform: translate(0, 0); }
  55% { clip-path: var(--clip-seven); transform: translate(calc(var(--shimmy-distance) * 1%), 0); }
  60% { clip-path: var(--clip-seven); transform: translate(0, 0); }
  31%, 61%, 100% { clip-path: var(--clip-four); }
}

/* Color variants: green engage, pink abort, violet reset */
.cybr-green { --primary-hue: 135; --shadow-primary-hue: 150; --shadow-secondary-hue: 60; --primary-lightness: 58; }
.cybr-pink  { --primary-hue: 315; --shadow-primary-hue: 320; --shadow-secondary-hue: 180; --primary-lightness: 60; }
.cybr-violet{ --primary-hue: 275; --shadow-primary-hue: 285; --shadow-secondary-hue: 180; --primary-lightness: 58; }

@media (prefers-reduced-motion: reduce) {
      * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
    }
  </style>
</head>

<body class="bg-void-black font-display text-slate-100 overflow-y-auto antialiased">
  <div class="fixed inset-0 vhs-overlay z-50 mix-blend-overlay opacity-30 pointer-events-none"></div>

  <div class="fixed inset-0 z-0 overflow-hidden pointer-events-none">
    <div class="absolute top-[15%] left-[20%] w-1.5 h-1.5 neural-node rounded-full blur-[2px] opacity-40" style="animation: drift 7s ease-in-out infinite;"></div>
    <div class="absolute top-[40%] right-[10%] w-1 h-1 neural-node rounded-full blur-[1px] opacity-60" style="animation: drift 9s ease-in-out infinite;"></div>
    <div class="absolute bottom-[30%] left-[15%] w-2 h-2 neural-node rounded-full blur-[3px] opacity-30" style="animation: drift 11s ease-in-out infinite;"></div>
    <div class="absolute top-[70%] right-[30%] w-1 h-1 neural-node rounded-full blur-[1px] opacity-50" style="animation: drift 8s ease-in-out infinite;"></div>
    <div class="absolute top-[25%] right-[45%] w-1.5 h-1.5 neural-node rounded-full blur-[2px] opacity-35" style="animation: drift 10s ease-in-out infinite;"></div>
    <div class="absolute bottom-[18%] right-[18%] w-2 h-2 neural-node rounded-full blur-[3px] opacity-22" style="animation: drift 12s ease-in-out infinite;"></div>
    <div class="absolute top-[58%] left-[8%] w-1 h-1 neural-node rounded-full blur-[1px] opacity-55" style="animation: drift 6s ease-in-out infinite;"></div>

    <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,212,255,0.08)_0%,rgba(2,4,8,0.00)_55%,rgba(2,4,8,0.90)_78%)]"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-void-black to-void-black"></div>
  </div>

  <div class="relative flex min-h-[100dvh] w-full flex-col justify-between">

    <!-- Header video (speed.mp4) -->
    <div class="relative z-30 w-full header-video-frame">
      <div class="px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4">
        <div class="w-full rounded-xl overflow-hidden border border-white/10 bg-black/50">
          <video
            id="headerVid"
            class="w-full max-h-[140px] sm:max-h-[180px] object-contain bg-black"
            src="speed.mp4"
            autoplay
            muted
            loop
            playsinline
          ></video>
        </div>
      </div>
    </div>

    <header class="relative z-20 flex items-center justify-between p-4 pt-3 sm:p-6 sm:pt-6 bg-gradient-to-b from-void-black/75 to-transparent">
      <div class="flex flex-col">
        <span class="text-[10px] tracking-[0.3em] text-ethereal-blue/70 font-mono uppercase">SYSTEM STATUS</span>
        <h2 class="text-ethereal-blue text-sm sm:text-base font-black leading-tight flex items-center gap-2 italic chromatic-aberration">
          <span class="material-symbols-outlined text-base">terminal</span>
          PSYCHO-ENGINE / HOLO MERGE
        </h2>
      </div>

      <div class="flex gap-4 items-center">
        <div class="text-right hidden sm:block">
          <p class="text-[10px] text-slate-500 uppercase font-mono">Neural Link</p>
          <p class="text-xs font-bold text-cyber-violet font-mono tracking-widest">ENCRYPTED</p>
        </div>

        <button id="btnSettings" class="tap-glow size-10 rounded-full bg-ethereal-blue/10 border border-ethereal-blue/30 flex items-center justify-center text-ethereal-blue" type="button">
          <span class="material-symbols-outlined">settings_input_component</span>
        </button>
      </div>
    </header>

    <main class="relative z-20 flex-1 min-h-0 flex flex-col items-center justify-center px-4 sm:px-6 perspective-center">
      <div class="absolute inset-0 z-0 opacity-20">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#020408_70%)] z-10"></div>
        <div class="w-full h-full bg-center bg-cover scale-110"
             style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCZq-u9WkN5HIg-r6DbgbkFk0tVDngjoCq4_8_BDBx3wyWNCmaGxO20LTdwawL8PjRJKV_p7S-T5hpkp896wdHx_tNNWzR5Po399iz7PWgKZ8UCIu3-zxQgOpcB9oxo2_iwzayGSS04HnOFrPWGjFWQ5WdQG1tZvhOsA0mG_6jeFw2lkbNI5eZ95J1qvR3UOxrO4TupRQbqRSY71MphD1earMcsm5cJaUKoEQIT9fWSqYOG5YRzcTXfqIw3JkYXFIujgGbk_4jMAMPf');">
        </div>
      </div>

      <div class="relative z-10 flex flex-col items-center w-full max-w-sm sm:max-w-md">

        <div class="absolute -top-12 left-0 right-0 flex justify-between px-6 opacity-90 rotate-x-25" aria-hidden="true">
          <div class="flex flex-col items-start border-l-2 border-ethereal-blue/40 pl-2">
            <span class="text-[9px] text-ethereal-blue uppercase tracking-widest font-mono">Heat Level</span>
            <span id="heatLabel" class="text-sm font-black text-ethereal-blue">IDLE</span>
          </div>
          <div class="flex flex-col items-end border-r-2 border-cyber-violet/40 pr-2">
            <span class="text-[9px] text-cyber-violet uppercase tracking-widest font-mono">Pressure</span>
            <span id="pressureLabel" class="text-sm font-black text-cyber-violet">STABLE</span>
          </div>
        </div>

        <div class="relative group w-full flex items-center justify-center">
          <div id="aura" class="absolute -inset-10 bg-ethereal-blue/10 blur-3xl rounded-full" style="animation: holoPulse 4.5s ease-in-out infinite;"></div>
          <div class="absolute -inset-6 sm:-inset-8 engine-frame rounded-3xl rotate-45 opacity-45 border-2 border-white/5"></div>

          <div class="relative size-64 sm:size-80 flex items-center justify-center transform-gpu">
            <div class="absolute inset-0 rounded-full glass-ring animate-[spin_10s_linear_infinite] opacity-80"></div>
            <div class="absolute inset-4 rounded-full glass-ring opacity-55 animate-[spin_15s_linear_infinite_reverse] border-cyber-violet/20"></div>
            <div class="absolute inset-2 rounded-full border border-ethereal-blue/10 opacity-60 scale-110"></div>

            <div class="absolute inset-2 flex items-center justify-center">
              <div class="w-full h-full rounded-full border-[1px] border-dashed border-white/10 opacity-45"></div>
            </div>

            <div class="absolute inset-0 flex items-center justify-center">
              <div id="needlePivot" class="absolute w-full h-full flex items-center justify-center" style="transform: rotate(140deg);">
                <div class="relative w-44 sm:w-52 flex items-center justify-end origin-left">
                  <div class="w-28 sm:w-32 h-[3px] bg-gradient-to-r from-transparent via-ethereal-blue to-white rounded-full shadow-[0_0_20px_#00d4ff]"></div>
                  <div class="absolute -right-1 w-2 h-2 bg-white rounded-full blur-[2px]"></div>
                </div>
                <div class="absolute w-36 h-20 bg-ethereal-blue/5 blur-xl rounded-full -left-12 origin-right"></div>
              </div>
              <div class="absolute w-3.5 h-3.5 rounded-full bg-white/80 blur-[0.5px] shadow-[0_0_18px_rgba(0,212,255,0.35)]"></div>
            </div>

            <div class="relative z-20 size-48 sm:size-56 bg-panel/70 soft-frost rounded-2xl border-2 border-ethereal-blue/35 glitch-border p-4 flex flex-col items-center justify-center overflow-hidden">
              <div class="absolute inset-0 opacity-15 scanline-mask"></div>

              <div class="relative z-10 flex flex-col items-center select-none">
                <span id="phaseLabel" class="text-[10px] tracking-[0.5em] text-ethereal-blue/70 font-mono font-bold mb-1 uppercase italic">IDLE</span>

                <div class="flex items-baseline gap-1 chromatic-aberration">
                  <span id="mainInt" class="text-6xl sm:text-7xl font-black text-white tracking-tighter leading-none">0</span>
                  <span id="mainFrac" class="text-xl font-black text-ethereal-blue">.0</span>
                </div>

                <span id="unitLabel" class="text-lg font-bold text-ethereal-blue/80 tracking-widest mt-2">Mbps</span>

                <div class="mt-3 flex items-center gap-2 font-mono text-[10px] text-white/60">
                  <span class="inline-flex items-center gap-1">
                    <span class="w-1.5 h-1.5 rounded-full bg-ethereal-blue shadow-[0_0_8px_#00d4ff]"></span>
                    <span id="statusText">READY</span>
                  </span>
                  <span class="opacity-50">|</span>
                  <span id="timerText" class="tracking-widest">00:00</span>
                </div>
              </div>

              <div class="absolute bottom-0 left-0 right-0 h-16 opacity-25 data-heart-glow">
                <svg class="w-full h-full text-ethereal-blue" viewBox="0 0 200 100" preserveAspectRatio="none">
                  <path id="wavePath" d="M0 100 L20 40 L40 80 L60 20 L80 90 L100 10 L120 70 L140 30 L160 85 L180 45 L200 100 Z" fill="currentColor"></path>
                </svg>
              </div>

              <div id="scanJitter" class="absolute inset-0 pointer-events-none opacity-0"></div>
            </div>

            <div class="absolute -top-4 -right-4 size-12 bg-cyber-violet/20 border border-cyber-violet/50 nitro-shard flex items-center justify-center">
              <span class="material-symbols-outlined text-cyber-violet text-sm">bolt</span>
            </div>
          </div>
        </div>

        <div class="mt-10 sm:mt-12 grid grid-cols-3 gap-3 w-full px-2">
          <div class="bg-engine-iron/55 border-l border-ethereal-blue/40 p-3 rounded-sm">
            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-widest font-mono">Latency</p>
            <p class="text-lg font-black text-slate-100">
              <span id="latencyVal">--</span><span class="text-[10px] text-ethereal-blue ml-1 font-mono">MS</span>
            </p>
          </div>
          <div class="bg-engine-iron/55 border-l border-ethereal-blue/40 p-3 rounded-sm">
            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-widest font-mono">Jitter</p>
            <p class="text-lg font-black text-slate-100">
              <span id="jitterVal">--</span><span class="text-[10px] text-ethereal-blue ml-1 font-mono">MS</span>
            </p>
          </div>
          <div class="bg-engine-iron/55 border-l border-ethereal-blue/40 p-3 rounded-sm">
            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-widest font-mono">Loss</p>
            <p class="text-lg font-black text-slate-100">
              <span id="lossVal">--</span><span class="text-[10px] text-ethereal-blue ml-1 font-mono">%</span>
            </p>
          </div>
        </div>

        <div class="mt-4 grid grid-cols-2 gap-3 w-full px-2">
          <div class="bg-panel/35 border border-white/5 p-3 rounded-md">
            <p class="text-[9px] text-slate-500 uppercase font-mono tracking-widest">Downlink</p>
            <p class="text-sm font-mono text-white"><span id="downVal">0.0</span> <span class="text-ethereal-blue">Mbps</span></p>
          </div>
          <div class="bg-panel/35 border border-white/5 p-3 rounded-md">
            <p class="text-[9px] text-slate-500 uppercase font-mono tracking-widest">Uplink</p>
            <p class="text-sm font-mono text-white"><span id="upVal">0.0</span> <span class="text-cyber-violet">Mbps</span></p>
          </div>
        </div>

      </div>
    </main>

    <footer class="relative z-30 shrink-0 p-6 pb-10 sm:px-8 sm:pb-12 flex flex-col gap-6">
      
<div class="grid grid-cols-3 gap-3">
        <button id="btnStart" class="cybr-btn cybr-green tap-glow" type="button" aria-label="Engage">
          <span class="cybr-btn__glitch" aria-hidden="true">ENGAGE</span>
          ENGAGE
        </button>

        <button id="btnAbort" class="cybr-btn cybr-pink tap-glow" type="button" aria-label="Abort">
          <span class="cybr-btn__glitch" aria-hidden="true">ABORT</span>
          ABORT
        </button>

        <button id="btnReset" class="cybr-btn cybr-violet tap-glow" type="button" aria-label="Reset">
          <span class="cybr-btn__glitch" aria-hidden="true">RESET</span>
          RESET
        </button>
      </div>

      <nav class="flex justify-between items-center px-4">
        <a class="flex flex-col items-center gap-1 text-ethereal-blue" href="#">
          <span class="material-symbols-outlined text-2xl">offline_bolt</span>
          <span class="text-[9px] font-bold tracking-tighter font-mono uppercase">Engine</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 hover:text-ethereal-blue transition-colors" href="#">
          <span class="material-symbols-outlined text-2xl">history</span>
          <span class="text-[9px] font-bold tracking-tighter font-mono uppercase">Logs</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 hover:text-ethereal-blue transition-colors" href="#">
          <span class="material-symbols-outlined text-2xl">lan</span>
          <span class="text-[9px] font-bold tracking-tighter font-mono uppercase">Nodes</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 hover:text-ethereal-blue transition-colors" href="#">
          <span class="material-symbols-outlined text-2xl">settings</span>
          <span class="text-[9px] font-bold tracking-tighter font-mono uppercase">Config</span>
        </a>
      </nav>

      <div class="absolute bottom-24 left-0 w-full flex justify-center opacity-[0.08] pointer-events-none select-none">
        <span class="text-[96px] sm:text-[120px] font-black tracking-tighter leading-none">OVERDRIVE</span>
      </div>
    </footer>

    <div class="absolute top-1/2 left-4 -translate-y-1/2 flex flex-col gap-1 z-0">
      <div class="h-12 w-0.5 bg-ethereal-blue/30"></div>
      <div class="h-2 w-0.5 bg-cyber-violet"></div>
      <div class="h-20 w-0.5 bg-ethereal-blue/10"></div>
    </div>
    <div class="absolute top-1/2 right-4 -translate-y-1/2 flex flex-col gap-1 z-0 items-end">
      <div class="h-20 w-0.5 bg-ethereal-blue/10"></div>
      <div class="h-2 w-0.5 bg-ethereal-blue"></div>
      <div class="h-12 w-0.5 bg-cyber-violet/30"></div>
    </div>

  </div>

  <script>
    (() => {
      const $ = (id) => document.getElementById(id);

      const ui = {
        btnStart: $("btnStart"),
        btnAbort: $("btnAbort"),
        btnReset: $("btnReset"),

        heatLabel: $("heatLabel"),
        pressureLabel: $("pressureLabel"),
        phaseLabel: $("phaseLabel"),
        unitLabel: $("unitLabel"),
        statusText: $("statusText"),
        timerText: $("timerText"),

        mainInt: $("mainInt"),
        mainFrac: $("mainFrac"),

        latencyVal: $("latencyVal"),
        jitterVal: $("jitterVal"),
        lossVal: $("lossVal"),

        downVal: $("downVal"),
        upVal: $("upVal"),

        needlePivot: $("needlePivot"),
        aura: $("aura"),
        scanJitter: $("scanJitter"),
        wavePath: $("wavePath"),
      };

      const State = Object.freeze({
        IDLE: "IDLE",
        PING: "PING",
        DOWNLOAD: "DOWNLOAD",
        UPLOAD: "UPLOAD",
        DONE: "DONE",
        ABORTED: "ABORTED",
      });

      let state = State.IDLE;

      let cur = {
        ping: null,
        jitter: null,
        loss: null,
        down: 0,
        up: 0,
        display: 0,
        needleDeg: 140,
      };

      let raf = 0;
      let phaseStart = 0;
      let runStart = 0;
      let aborted = false;

      const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
      const ease = (x) => {
        x = clamp(x, 0, 1);
        return x * x * (3 - 2 * x);
      };
      const lerp = (a, b, t) => a + (b - a) * t;

      const fmt1 = (v) => (Math.round(v * 10) / 10).toFixed(1);
      const fmtIntFrac = (v) => {
        const fixed = fmt1(v);
        const [i, f] = fixed.split(".");
        return { i, f };
      };

      const setMainReadout = (v) => {
        const { i, f } = fmtIntFrac(v);
        ui.mainInt.textContent = i;
        ui.mainFrac.textContent = "." + f;
      };

      const setNeedleAngle = (deg) => {
        ui.needlePivot.style.transform = `rotate(${deg}deg)`;
      };

      const setPhase = (s) => {
        state = s;
        ui.phaseLabel.textContent = s;

        ui.statusText.textContent =
          s === State.IDLE ? "READY" :
          s === State.PING ? "PROBING" :
          s === State.DOWNLOAD ? "DOWNLINK" :
          s === State.UPLOAD ? "UPLINK" :
          s === State.DONE ? "COMPLETE" :
          s === State.ABORTED ? "ABORTED" : "ACTIVE";

        ui.heatLabel.textContent =
          s === State.IDLE ? "IDLE" :
          s === State.PING ? "WARMING" :
          s === State.DOWNLOAD ? "CRITICAL" :
          s === State.UPLOAD ? "CRITICAL" :
          s === State.DONE ? "COOLING" :
          s === State.ABORTED ? "CUT" : "ACTIVE";

        ui.pressureLabel.textContent =
          s === State.IDLE ? "STABLE" :
          s === State.PING ? "RISING" :
          s === State.DOWNLOAD ? "OVERLOAD" :
          s === State.UPLOAD ? "OVERLOAD" :
          s === State.DONE ? "VENTING" :
          s === State.ABORTED ? "DUMPED" : "ACTIVE";

        const scanning = (s === State.PING || s === State.DOWNLOAD || s === State.UPLOAD);
        ui.scanJitter.style.opacity = scanning ? "1" : "0";
        ui.scanJitter.style.animation = scanning ? "jitter 0.5s infinite" : "none";

        ui.aura.style.opacity = scanning ? "0.55" : "0.35";
        ui.aura.style.filter = scanning ? "blur(36px)" : "blur(28px)";
      };

      const lockButtons = (locked) => {
        ui.btnStart.disabled = locked;
        ui.btnAbort.disabled = !locked;
        ui.btnReset.disabled = locked;
      };

      const mmss = (ms) => {
        const s = Math.floor(ms / 1000);
        const m = Math.floor(s / 60);
        const r = s % 60;
        return String(m).padStart(2, "0") + ":" + String(r).padStart(2, "0");
      };

      const resetUI = () => {
        aborted = false;
        setPhase(State.IDLE);
        lockButtons(false);

        cur.ping = null;
        cur.jitter = null;
        cur.loss = null;
        cur.down = 0;
        cur.up = 0;
        cur.display = 0;
        cur.needleDeg = 140;

        ui.latencyVal.textContent = "--";
        ui.jitterVal.textContent = "--";
        ui.lossVal.textContent = "--";
        ui.downVal.textContent = "0.0";
        ui.upVal.textContent = "0.0";

        ui.unitLabel.textContent = "Mbps";
        ui.timerText.textContent = "00:00";

        setMainReadout(0);
        setNeedleAngle(cur.needleDeg);

        ui.wavePath.setAttribute("d", "M0 100 L20 40 L40 80 L60 20 L80 90 L100 10 L120 70 L140 30 L160 85 L180 45 L200 100 Z");
      };

      const rand = (a, b) => a + Math.random() * (b - a);

      const profile = {
        pingMs: () => Math.round(rand(8, 22)),
        jitterMs: () => Math.round(rand(1, 6)),
        lossPct: () => Math.round(rand(0, 2) * 10) / 10,
        downPeak: () => rand(650, 980),
        upPeak: () => rand(70, 180),
      };

      const needleForMbps = (mbps) => {
        const max = 1000;
        const t = clamp(mbps / max, 0, 1);
        return lerp(50, 320, ease(t));
      };

      const updateWaveform = (timeMs, intensity01) => {
        const wob = (i) => Math.sin((timeMs / 140) + i) * (12 + 22 * intensity01);
        const base = [
          [0,100],[20,40],[40,80],[60,20],[80,90],[100,10],[120,70],[140,30],[160,85],[180,45],[200,100]
        ];
        const pts = base.map(([x,y], idx) => {
          const dy = wob(idx * 0.9) * (idx % 2 === 0 ? 0.35 : 0.55);
          const ny = clamp(y + dy, 4, 98);
          return [x, ny];
        });
        const d = "M" + pts.map(([x,y]) => `${x} ${y.toFixed(1)}`).join(" L ") + " Z";
        ui.wavePath.setAttribute("d", d);
      };

      const PING_DUR = 1200;
      const DOWN_DUR = 5200;
      const UP_DUR = 3800;

      let downPeak = 0;
      let upPeak = 0;

      const startRun = () => {
        if (state !== State.IDLE && state !== State.DONE && state !== State.ABORTED) return;

        aborted = false;
        lockButtons(true);

        runStart = performance.now();
        phaseStart = runStart;
        setPhase(State.PING);

        cur.ping = profile.pingMs();
        cur.jitter = profile.jitterMs();
        cur.loss = profile.lossPct();

        ui.latencyVal.textContent = String(cur.ping);
        ui.jitterVal.textContent = String(cur.jitter);
        ui.lossVal.textContent = String(cur.loss);

        cur.display = 0;
        setMainReadout(cur.display);
        setNeedleAngle(needleForMbps(0));

        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(tick);
      };

      const abortRun = () => {
        if (state === State.IDLE || state === State.DONE || state === State.ABORTED) return;
        aborted = true;
        setPhase(State.ABORTED);
        lockButtons(false);

        ui.unitLabel.textContent = "Mbps";
        ui.statusText.textContent = "ABORTED";

        cancelAnimationFrame(raf);
      };

      const finishRun = () => {
        setPhase(State.DONE);
        lockButtons(false);
      };

      const tick = (now) => {
        if (aborted) return;

        const elapsed = now - runStart;
        ui.timerText.textContent = mmss(elapsed);

        const scanIntensity =
          (state === State.PING) ? 0.35 :
          (state === State.DOWNLOAD) ? 0.85 :
          (state === State.UPLOAD) ? 0.75 :
          0.25;

        updateWaveform(now, scanIntensity);

        if (state === State.PING) {
          const t = ease((now - phaseStart) / PING_DUR);
          ui.unitLabel.textContent = "ms";
          const shown = lerp(0, cur.ping ?? 12, t);
          cur.display = shown;
          setMainReadout(cur.display);

          const nd = lerp(needleForMbps(0), needleForMbps(120), t);
          setNeedleAngle(nd);

          if ((now - phaseStart) >= PING_DUR) {
            phaseStart = now;
            downPeak = profile.downPeak();
            ui.unitLabel.textContent = "Mbps";
            setPhase(State.DOWNLOAD);
          }
        }
        else if (state === State.DOWNLOAD) {
          const raw = (now - phaseStart) / DOWN_DUR;
          const t = ease(raw);

          const ramp = lerp(0, downPeak, t);
          const noise = Math.sin(now / 180) * (downPeak * 0.015) + Math.sin(now / 70) * (downPeak * 0.006);
          const val = clamp(ramp + noise, 0, downPeak * 1.02);

          cur.down = val;
          ui.downVal.textContent = fmt1(cur.down);

          cur.display = val;
          setMainReadout(cur.display);

          setNeedleAngle(needleForMbps(val));

          if (raw >= 1) {
            phaseStart = now;
            upPeak = profile.upPeak();
            setPhase(State.UPLOAD);
          }
        }
        else if (state === State.UPLOAD) {
          const raw = (now - phaseStart) / UP_DUR;
          const t = ease(raw);

          const ramp = lerp(0, upPeak, t);
          const noise = Math.sin(now / 200) * (upPeak * 0.03) + Math.sin(now / 90) * (upPeak * 0.01);
          const val = clamp(ramp + noise, 0, upPeak * 1.05);

          cur.up = val;
          ui.upVal.textContent = fmt1(cur.up);

          cur.display = val;
          setMainReadout(cur.display);

          setNeedleAngle(needleForMbps(val));

          if (raw >= 1) {
            ui.unitLabel.textContent = "Mbps";
            setMainReadout(cur.down);
            setNeedleAngle(needleForMbps(cur.down));

            finishRun();
            cancelAnimationFrame(raf);
            return;
          }
        }
        else {
          cancelAnimationFrame(raf);
          return;
        }

        raf = requestAnimationFrame(tick);
      };

      ui.btnStart.addEventListener("click", startRun);
      ui.btnAbort.addEventListener("click", abortRun);
      ui.btnReset.addEventListener("click", () => {
        cancelAnimationFrame(raf);
        resetUI();
      });

      $("btnSettings").addEventListener("click", () => {
        const overlay = document.querySelector(".vhs-overlay");
        const curOp = parseFloat(getComputedStyle(overlay).opacity || "0.30");
        overlay.style.opacity = (curOp < 0.35) ? "0.45" : "0.28";
      });

      resetUI();
    })();
  </script>
</body>
</html>
